<div
  id="container"
  class="
    px-2
    py-5
    d-flex
    flex-column
    justify-content-center
    align-items-center
    bg
    h-100
    px-sm-0
  "
>
  <div class="px-2 col-lg-8 col-12 droid-font" *ngIf="!completed">
    <div class="pt-2 card rounded-16">
      <div class="px-4 card-body px-sm-4">
        <div
          class="
            gap-2
            d-flex
            justify-content-between
            align-items-center
            flex-column-reverse flex-md-row
            gap-md-0
          "
        >
          <div class="text-center text-sm-start">
            <h3>إنشاء حساب جديد</h3>
            <div *ngIf="index == 0" class="fs-16">1- ادخل بياناتك الأساسية</div>
            <div *ngIf="index == 1" class="fs-16">
              2- ارفق المرفقات المطلوبة
            </div>
          </div>
          <nav>
            <div
              class="gap-5 border-0 nav nav-tabs justify-content-between w-fit"
              id="nav-tab"
              role="tablist"
            >
              <button
                class="nav-link active"
                [class.finished]="firstForm.submitted && firstForm.valid"
                id="first-step-tap"
                data-bs-toggle="tab"
                data-bs-target="#firstStep"
                type="button"
                role="tab"
                aria-controls="firstStep"
                aria-selected="true"
                (click)="index = 0"
              >
                <div class="num line">1</div>
                <div class="fs-14 d-none d-sm-block">بيانات اساسية</div>
              </button>
              <button
                #second
                class="nav-link"
                id="second-step-tap"
                data-bs-toggle="tab"
                data-bs-target="#secondStep"
                type="button"
                role="tab"
                aria-controls="secondStep"
                aria-selected="false"
                (click)="index = 1"
              >
                <div class="num">2</div>
                <div class="fs-14 d-none d-sm-block">المرفقات</div>
              </button>
            </div>
          </nav>
        </div>
        <div class="py-3 tab-content" id="nav-tabContent">
          <!-- ----------------------------------------------------------------------- -->
          <!-- ------------------------------ sild one ------------------------------ -->
          <!-- ----------------------------------------------------------------------- -->
          <div
            class="tab-pane fade show active"
            id="firstStep"
            role="tabpanel"
            aria-labelledby="first-step-tap"
          >
            <form
              [formGroup]="firstFormGroup"
              (ngSubmit)="onNextPressed(second)"
              #firstForm="ngForm"
            >
              <div class="row row-gap">
                <!-- ---------------------------- company name ----------------------------- -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="mb-2 fs-16 text-b58d2e" for="companyName"
                      >اسم الشركة</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      name="companyName"
                      id="companyName"
                      formControlName="name"
                      placeholder="ما هو اسم شركتكم"
                    />

                    <div
                      *ngIf="Name.errors?.required && firstForm.submitted"
                      class="p-1 error-msg small"
                      role="alert"
                    >
                      <i class="fas fa-times-circle me-2"></i>
                      من فضلك ادخل اسم الشركة
                    </div>

                    <div
                      *ngIf="Name.errors?.minlength && firstForm.submitted"
                      class="p-1 error-msg small"
                      role="alert"
                    >
                      <i class="fas fa-times-circle me-2"></i>
                      اقل عدد للأحرف هو
                      <span class="mx-1">{{
                        Name.errors?.minlength.requiredLength
                      }}</span>
                    </div>
                  </div>
                </div>

                <!-- -------------------------------- phone -------------------------------- -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="mb-2 fs-16 text-b58d2e" for="phone"
                      >رقم الجوال</label
                    >
                    <input
                      type="text"
                      class="form-control"
                      name="phone"
                      id="phone"
                      formControlName="phoneNumber"
                      placeholder="ادخل رقم الجوال"
                    />

                    <div
                      *ngIf="Phone.errors?.required && firstForm.submitted"
                      class="p-1 error-msg small"
                      role="alert"
                    >
                      <i class="fas fa-times-circle me-2"></i>
                      رقم الجوال مطلوب
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <div class="form-group">
                    <label class="mb-2 fs-16 text-b58d2e" for="companyOwnerName"
                      >اسم صاحب الشركة
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      name="companyName"
                      id="companyOwnerName"
                      formControlName="fullName"
                      placeholder="اسم صاحب الشركة"
                    />

                    <div
                      *ngIf="FullName.errors?.required && firstForm.submitted"
                      class="p-1 error-msg small"
                      role="alert"
                    >
                      <i class="fas fa-times-circle me-2"></i>
                      من فضلك ادخل اسم صاحب الشركة
                    </div>

                    <div
                      *ngIf="FullName.errors?.minlength && firstForm.submitted"
                      class="p-1 error-msg small"
                      role="alert"
                    >
                      <i class="fas fa-times-circle me-2"></i>
                      اقل عدد للأحرف هو
                      <span class="mx-1">{{
                        Name.errors?.minlength.requiredLength
                      }}</span>
                    </div>
                  </div>
                </div>

                <!-- -------------------------------- mail --------------------------------- -->
                <div class="col-md-6">
                  <div class="form-group">
                    <label class="mb-2 fs-16 text-b58d2e" for="email"
                      >البريد الالكتروني</label
                    >
                    <input
                      type="email"
                      class="form-control"
                      name="email"
                      id="email"
                      formControlName="email"
                      placeholder="ادخل البريد الالكتروني"
                    />

                    <div
                      *ngIf="Email.errors?.required && firstForm.submitted"
                      class="p-1 error-msg small"
                      role="alert"
                    >
                      <i class="fas fa-times-circle me-2"></i>
                      البريد الألكتروني مطلوب
                    </div>
                  </div>
                  <div
                    *ngIf="Email.errors?.pattern && firstForm.submitted"
                    class="p-1 error-msg small"
                    role="alert"
                  >
                    <i class="fas fa-times-circle me-2"></i>
                    من فضلك ادخل بريد الالكترونى صحيح
                  </div>
                </div>

                <!-- -------------------------------- city --------------------------------- -->
                <div class="col-6 col-md-3">
                  <label class="mb-2 fs-16 text-b58d2e" for="email"
                    >المدينة</label
                  >
                  <div>
                    <div class="form-group">
                      <input
                        type="text"
                        class="form-control"
                        name="city"
                        id="city"
                        placeholder="المدينه"
                        formControlName="city"
                      />
                    </div>
                  </div>
                  <div
                    *ngIf="City.errors?.required && firstForm.submitted"
                    class="p-1 error-msg small"
                    role="alert"
                  >
                    <i class="fas fa-times-circle me-2"></i>
                    المدينة مطلوبه
                  </div>
                </div>

                <!-- ------------------------- Number of Employees ------------------------- -->
                <div class="col-6 col-md-3">
                  <label class="mb-2 fs-16 text-b58d2e" for="email"
                    >عدد الموظفين</label
                  >
                  <div>
                    <div class="form-group">
                      <input
                        type="number"
                        min="10"
                        class="form-control"
                        name="employeesNumbers"
                        id="employeesNumbers"
                        formControlName="employeesNumbers"
                        placeholder="اختر"
                      />
                    </div>
                  </div>

                  <div
                    *ngIf="
                      EmployeesNumbers.errors?.required && firstForm.submitted
                    "
                    class="p-1 error-msg small"
                    role="alert"
                  >
                    <i class="fas fa-times-circle me-2"></i>
                    عدد المواظفين مطلوب
                  </div>

                  <div
                    *ngIf="EmployeesNumbers.errors?.min && firstForm.submitted"
                    class="p-1 error-msg small"
                    role="alert"
                  >
                    <i class="fas fa-times-circle me-2"></i>
                    اقل عدد مسموح به هو 10 مواظفين
                  </div>
                </div>

                <!-- --------------------------- companyAddress ---------------------------- -->
                <div class="col-12 col-md-6">
                  <div class="form-group">
                    <label class="mb-2 fs-16 text-b58d2e" for="companyAddress">
                      مكان الشركة
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      name="companyAddress"
                      id="companyAddress"
                      formControlName="mapUrl"
                      placeholder="ما هو مكان شركتكم"
                      (keydown.enter)="$event.preventDefault()"
                      autocorrect="off"
                      autocapitalize="off"
                      spellcheck="off"
                      type="text"
                      #search
                    />

                    <div
                      *ngIf="Address.errors?.required && firstForm.submitted"
                      class="p-1 error-msg small"
                      role="alert"
                    >
                      <i class="fas fa-times-circle me-2"></i>
                      موقع الشركة مطلوب
                    </div>
                  </div>
                </div>

                <div class="col-12 col-md-6">
                  <div class="form-group">
                    <label class="mb-2 fs-16 text-b58d2e" for="companyAddress">
                      موقع الشركة
                    </label>
                    <input
                      type="text"
                      class="form-control"
                      name="companyWebsite"
                      id="companyWebsite"
                      formControlName="website"
                      placeholder="الموقع الالكترونى لشركتكم"
                    />

                    <div
                      *ngIf="Website.errors?.required && firstForm.submitted"
                      class="p-1 error-msg small"
                      role="alert"
                    >
                      <i class="fas fa-times-circle me-2"></i>
                      رابط موقع الشركة مطلوب
                    </div>
                  </div>
                </div>

                <!-- ------------------------------- skills -------------------------------- -->
                <div class="col-12">
                  <label class="mb-2 fs-16 text-b58d2e">المهارات</label>
                  <div id="skills" class="flex-wrap gap-2 d-flex">
                    <div
                      class="form-check"
                      *ngFor="let item of skills; let i = index"
                    >
                      <input
                        type="checkbox"
                        class="form-check-input"
                        name="check"
                        [id]="'check' + i"
                        [value]="item.id"
                        (change)="onCheckboxChange($event)"
                      />
                      <label [for]="'check' + i" class="form-check-label">
                        {{ item.name }}
                      </label>
                    </div>
                  </div>
                </div>

                <div class="col-12">
                  <agm-map
                    [latitude]="latitude"
                    [longitude]="longitude"
                    [zoom]="zoom"
                    [fullscreenControl]="true"
                    [mapTypeControl]="true"
                    [scaleControl]="true"
                    [panControl]="true"
                    [lang]="'ar'"
                  >
                    <agm-marker
                      [latitude]="latitude"
                      [longitude]="longitude"
                      [markerDraggable]="true"
                      (dragEnd)="markerDragEnd($event)"
                    ></agm-marker>
                  </agm-map>
                </div>
              </div>

              <div class="gap-2 mt-5 d-grid">
                <button class="btn btn-dark py-2-5" type="submit">
                  الخطوة التالية
                </button>
                <button
                  class="btn btn-outline-dark py-2-5"
                  type="button"
                  data-bs-toggle="modal"
                  data-bs-target="#staticBackdrop"
                  [routerLink]="['/auth/login']"
                  routerLinkActive="active"
                >
                  تسجيل الدخول
                </button>
              </div>
            </form>
          </div>

          <!-- ----------------------------------------------------------------------- -->
          <!-- ------------------------------ slide two ------------------------------ -->
          <!-- ----------------------------------------------------------------------- -->
          <div
            class="tab-pane fade"
            id="secondStep"
            role="tabpanel"
            aria-labelledby="second-step-tap"
          >
            <form
              [formGroup]="secondFormGroup"
              (ngSubmit)="onSubmit()"
              #secondForm="ngForm"
            >
              <div class="row">
                <!-- -------------------------------- logo --------------------------------- -->
                <div class="col-md-4">
                  <label class="mb-3 fs-16 text-b58d2e" for="companyAddress">
                    شعار الشركة
                  </label>
                  <div class="gap-3 d-flex flex-column">
                    <div
                      class="img-preview"
                      [style.backgroundImage]="'url(' + logoUrl + ')'"
                    ></div>

                    <div>
                      <div
                        class="
                          p-2
                          position-relative
                          justify-content-center
                          dashed-borders
                          d-flex
                          flex-column
                          align-items-center
                        "
                        id="upload-logo"
                      >
                        <input
                          type="file"
                          #logoDropRef
                          id="logoDropRef"
                          (change)="onLogoUploaded($event)"
                        />
                        <svg-icon
                          src="assets/images/icons/cloud-computing.svg"
                          svgClass="upload-icon"
                        ></svg-icon>
                        <div class="mt-2">
                          <div>اسحب و أفلت المرفقات هنا</div>
                          <div class="mt-1 text-center">- أو -</div>
                        </div>
                        <label
                          class="px-4 py-2 mt-2 btn btn-dark rounded-3 cursor-p"
                        >
                          استعراض
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-8">
                  <label class="mb-3 fs-16 text-b58d2e" for="companyAddress">
                    مرفقات (
                    <span *ngFor="let item of listOfRequiredAttachments">{{
                      item?.attachment.name + ","
                    }}</span
                    >)
                  </label>

                  <div class="gap-3 d-flex flex-column">
                    <!-- ------------------------------- upload -------------------------------- -->
                    <div
                      class="
                        flex-wrap
                        px-4
                        position-relative
                        d-flex
                        justify-content-between
                        align-items-center
                        dashed-borders
                      "
                      id="upload-docs"
                    >
                      <input
                        type="file"
                        #dropFiles
                        id="dropFiles"
                        (change)="onFilesUploaded($event)"
                        multiple
                      />
                      <svg-icon
                        src="assets/images/icons/cloud-computing.svg"
                        svgClass="upload-icon"
                      ></svg-icon>

                      <div class="text-center fs-18">
                        <div>اسحب و أفلت المرفقات هنا</div>
                        <div>- أو -</div>
                      </div>

                      <button
                        type="button"
                        class="px-4 py-2 mt-2 btn btn-dark rounded-3"
                      >
                        استعراض
                      </button>
                    </div>

                    <!-- ------------------------------- preview ------------------------------- -->
                    <div class="gap-3 d-flex flex-column">
                      <app-file-card
                        *ngFor="let item of attachments; let i = index"
                        [info]="item"
                        (delete)="deleteFile(i)"
                      ></app-file-card>
                    </div>
                  </div>

                  <div class="mt-3">
                    <div
                      class="d-flex flex-column align-items-center"
                      *ngIf="attachments.length == 0"
                    >
                      <div class="text-center text-black fs-24">
                        لا توجد مرفقات
                      </div>
                      <img
                        src="assets/images/bgs/empty.svg"
                        class="mt-3 img-fluid"
                        alt="empty"
                        width="50%"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <div class="my-3">
                <div
                  id="terms"
                  class="gap-3 form-check d-flex align-items-center"
                >
                  <input
                    type="checkbox"
                    class="form-check-input"
                    name=""
                    value="checkedValue"
                    [(ngModel)]="acceptTerms"
                    [ngModelOptions]="{ standalone: true }"
                  />
                  <label class="form-check-label fs-18">
                    <span
                      >الموافقة علي
                      <a
                        class="text-decoration-none text-d7be69 cursor-p"
                        (click)="getTerms(termsBtn)"
                        >الشروط والأحكام</a
                      ></span
                    >
                  </label>
                </div>
              </div>

              <div class="gap-2 mt-5 d-grid">
                <button
                  class="btn btn-dark py-2-5"
                  type="submit"
                  [disabled]="model.length < numberOfFiles || !acceptTerms"
                >
                  رفع المرفقات
                </button>
                <button
                  class="btn btn-outline-dark py-2-5"
                  type="button"
                  data-bs-toggle="modal"
                  data-bs-target="#staticBackdrop"
                  [routerLink]="['/auth/login']"
                  routerLinkActive="active"
                >
                  تسجيل الدخول
                </button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mt-5">
    <a
      href="tel:+920000000"
      class="py-1 text-black bg-white btn btn-second-gold"
    >
      <div class="gap-3 d-flex align-items-center">
        <svg-icon
          src="assets/images/icons/phone.svg"
          svgClass="phone"
        ></svg-icon>
        <div class="text-black d-flex flex-column align-items-start">
          <div class="fs-12 font-w-600">اتصل بنا 24/7</div>
          <div class="fs-18 font-w-600">{{ site.companyPhone }}</div>
        </div>
      </div>
    </a>
  </div>

  <!-- ---------------------------- success modal ---------------------------- -->
  <div
    class="border-0 card col-12 col-md-6 col-lg-4 rounded-16"
    *ngIf="completed"
  >
    <div class="text-center card-body droid-font">
      <div class="gap-3 d-flex flex-column justify-content-center">
        <div class="fs-lg-24 fs-20 font-w-600 text-333">
          التأكد من البريد الألكتروني
        </div>

        <div class="mt-3">
          <img
            src="assets/images/dashboard/New message-amico.svg"
            class="img-fluid"
          />
        </div>

        <div class="fs-md-16 fs-18">
          لقد اوشكت علي الاشتراك! لقد أرسلنا لم رساله إلكترونيه علي بريدك
          <br />
          <span class="text-b58d2e fs-20">
            {{ user?.email }}
          </span>
          <br />
          <span>فقط أضغك علي الرابط في البريدالمرسل لإستكمال الاشتراك </span>
          <span class="text-danger"
            >"يرجي مراجعة ال” Junk Mail في البريد الإلكتروني في حالة عدم وصول
            البريد في ال Inbox"</span
          >
          <hr />
          <div>
            هل مازالت لا توجد رساله؟
            <a class="cursor-pointer text-d7be69 text-decoration-none"
              >إعادة الأرسال</a
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ---------------------------- success modal ---------------------------- -->
<div
  class="border-0 card col-12 col-md-6 col-lg-4 rounded-16"
  *ngIf="completed"
>
  <div class="text-center card-body droid-font">
    <div class="gap-3 d-flex flex-column justify-content-center">
      <div class="fs-lg-24 fs-20 font-w-600 text-333">
        التأكد من البريد الألكتروني
      </div>

      <div class="mt-3">
        <img
          src="assets/images/dashboard/New message-amico.svg"
          class="img-fluid"
        />
      </div>

      <div class="fs-md-16 fs-18">
        لقد اوشكت علي الاشتراك! لقد أرسلنا لم رساله إلكترونيه علي بريدك
        <br />
        <span class="text-b58d2e fs-20">
          {{ user?.email }}
        </span>
        <br />
        <span>فقط أضغك علي الرابط في البريدالمرسل لإستكمال الاشتراك </span>
        <div class="text-danger fs-14">
          "يرجي مراجعة ال” Junk Mail في البريد الإلكتروني في حالة عدم وصول
          البريد في ال Inbox"
        </div>
        <hr />
        <div>
          هل مازالت لا توجد رساله؟
          <a class="cursor-pointer text-d7be69 text-decoration-none"
            >إعادة الأرسال</a
          >
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Button trigger modal -->
<button
  type="button"
  class="btn btn-primary"
  data-bs-toggle="modal"
  data-bs-target="#exampleModal"
  hidden
  #termsBtn
>
  Launch demo modal
</button>

<!-- Modal -->
<div
  class="modal fade"
  id="exampleModal"
  tabindex="-1"
  aria-labelledby="exampleModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog droid-font modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">الشروط والأحكام</h5>
        <button
          type="button"
          class="btn-close"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body" [innerHtml]="terms?.termsContent"></div>
      <div class="modal-footer">
        <button
          type="button"
          class="m-auto btn btn-outline-secondary"
          data-bs-dismiss="modal"
        >
          إغلاق
        </button>
      </div>
    </div>
  </div>
</div>
